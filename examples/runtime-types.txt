include "io.txt";
include "string.txt";

record transport {
	array<char> name;
}

record car extends transport {
	name = "Automobile";
	array<char> driver = "Michael";
}

transport myCar = new car;
if(myCar is car) {
	car aCar = dynamic_cast<car>(myCar);
	println(aCar.driver);
}

readonly auto check_rt_type = proc<typeParam>(typeParam object) return nothing{
	if(object is transport) {
		transport trans = dynamic_cast<car>(object);
		println(trans.name);
	}
	else {
		println("not a transport");
	}
	return;
};

readonly auto rt_return = proc<typeParam>() return typeParam {
	return dynamic_cast<typeParam>(new car {
				driver = "Tim";
	});
};

check_rt_type<transport>(myCar);
check_rt_type<int>(69);

println(rt_return<car>().name);
$int i = rt_return<int>(); $this gonna fail during runtime

readonly auto dynamic_cast2 = proc<targetType, inputType>(inputType inputval) return targetType {
	return dynamic_cast<targetType>(inputval);
};
println(dynamic_cast2<car, transport>(myCar).driver);
println(itos(dynamic_cast2<int, transport>(myCar))); $this too will fail during runtime