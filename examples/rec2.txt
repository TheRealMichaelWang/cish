include "io.txt";

abstract record person {
	mustinit array<char> name;
}

final record student extends person {
	mustinit int grade;
	float gpa;
}

abstract record subject {
	mustinit array<char> name;
	array<student> students;
}

final record physics extends subject {
	name = "Physics";
}

final record teacher extends person {
	mustinit subject subj;
}

person michael = new student {
	name = "Michael";
	grade = 10;
};

$person tim = new student {
$	name = "Tim";
$	gpa = -4.0f; 
$}; $this should generate a read-uninit at comp time

person maine = new teacher {
	name = "Mr. Maine";
	subj = new physics;
};

if(maine is student) {
	println("Maine is student?");
}
else {
	println("He is not a student.");
}

if(maine is teacher) {
	println(dynamic_cast<teacher>(maine).subj.name);
}
else {
 	println("This is broken");
}