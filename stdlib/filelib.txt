global readonly int file_lib_offset = foreign[17]("./filelib.o.so");  $loads the filelib dll library
if(file_lib_offset < 0){
  abort; $abort if unable to load filelib dll
}

global readonly auto file_create = proc(array<char> file_path) return bool {
	foreign[file_lib_offset](file_path); $selects a file
	if(foreign[file_lib_offset + 3]) {$check if file exists
		return false; $no file was created
	}
	else {
		foreign[file_lib_offset + 4]; $creates a file
		foreign[file_lib_offset + 2]; $closes the selected file
		return true;
	}
};

global readonly auto file_write_text = proc(array<char> file_path, array<char> contents) return bool {
  foreign[file_lib_offset](file_path); $select file
  if(foreign[file_lib_offset + 3]){ $check if file exists
    foreign[file_lib_offset + 7](contents); $write contents
    return true;
  }
  else {
    return false;
  }
};

global readonly auto file_read_text = proc (array<char> file_path) return array<char> {
  foreign[file_lib_offset](file_path); $select
  return foreign[file_lib_offset + 5](true); $read characters from file
};